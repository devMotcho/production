{% extends 'main.html' %}
{% load static %}
{% load crispy_forms_tags %}
{% block script %}{% endblock script %}

{% block content %}
<div class="container">
    <div class="row">
        <div class="col-3">
            <div class="card search__form shadow">
                <h4 class="card-header bg-dark text-warning text-center">
                    Procurar Dados Encomenda
                </h4>
                <div class="card-body">
                    <form action="" method="POST">
                        {% csrf_token %}
                        {{form|crispy}}
                        <button class="btn btn-outline-warning p-2 my-2" type="submit">Procurar</button>
                    </form>
                </div>
            </div>
        </div>
        <div class="col">
            <div class="card shadow bg-white text-center p-2 my-2 border-none">
                <div class="chart__image">
                    <img src="data:image/png;base64, {{chart|safe}}" id="img">
                </div>
            </div>
        </div>
    </div>

    <br>
    <div class="row">
        <div class="col">
            <div class="card">
                <h4 class="card-header bg-dark text-center text-warning">
                    Tabela Encomendas
                </h4>
                <div class="card-body">
                    <table class="table table-bordered">
                        <thead>
                            <tr class="table-dark text-center">
                                {% for k, v in df_dict.items %}
                                <th>{{k}}</th>
                                {% endfor %}
                            </tr>
                        </thead>
                        <tbody>

                            {% for rec in df_rec %}
                            <tr>
                                {% for i2, k2 in rec.items %}
                                <td>{{k2}}</td>
                                {% endfor %}
                            </tr>
                            {% endfor %}

                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>

    {% if dataframe %}
    dataframe
    {{dataframe|safe}}
    positions
    {{positions_df|safe}}
    {% endif %}
</div>




{% endblock content %}